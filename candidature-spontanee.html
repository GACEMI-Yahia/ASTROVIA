<!DOCTYPE html>
<html lang="fr">
<head>
  <link rel="icon" type="image/png" href="astrovia.jpg">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Candidature spontan√©e ‚Äì ASTROVIA</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  

  <style>
    html, body {
  margin: 0;
  padding: 0;
  scroll-behavior: smooth;
  scroll-padding-top: 0 !important;
  overflow-x: hidden;
}


    :root{
      --bg:#0c1020;          /* bleu nuit profond */
      --bg-soft:#111634;     /* bleu plus doux */
      --text:#e8ecf5;        /* texte principal */
      --muted:#b9c2d6;       /* texte secondaire */
      --accent:#6bd3ff;      /* bleu cyan accent */
      --accent-2:#00b884;    /* vert accent secondaire */
      --card:#151a3f;
      --line:rgba(255,255,255,.08);
      --warn:#f7b500;
      --error:#ff5a5f;
      --ok:#2ecc71;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:16px;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',sans-serif;background:radial-gradient(1200px 600px at 10% -10%,rgba(107,211,255,.15),transparent 50%), radial-gradient(800px 400px at 90% -10%,rgba(0,184,132,.12),transparent 50%), var(--bg);color:var(--text);line-height:1.6}
    a{color:var(--accent);text-decoration:none}
    img{max-width:100%;display:block}
    .container{width:min(1200px,92%);margin-inline:auto}

    /* Header */
    header {
  position: fixed;        /* ‚úÖ reste visible tout le temps */
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1000;          /* au-dessus de tout */
  background: rgba(12,16,32,0.85); /* fond semi-transparent */
  backdrop-filter: blur(10px);     /* effet de flou doux */
  border-bottom: 1px solid var(--line);
  transition: background 0.3s ease, box-shadow 0.3s ease;
}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.3px}
    .brand .logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:grid;place-items:center;color:#001628;font-weight:900}
    .logo-img {
  width: 40px;
  height: 40px;
  object-fit: cover;
  border-radius: 10px;
}

    .nav a{color:var(--text);opacity:.9}
    .navlinks{display:flex;gap:18px;align-items:center}
    .navlinks a{padding:8px 10px;border-radius:10px}
    .navlinks a:hover{background:var(--line)}
    /* Dropdown menu */
.navlinks ul, .navlinks li { list-style: none; margin: 0; padding: 0; }
.navlinks > li { position: relative; }

.dropdown > a::after {
  content: "";
}

.submenu {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  background: rgba(17, 22, 52, 0.95);
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: 8px 0;
  box-shadow: var(--shadow);
  min-width: 220px;
}

.submenu li a {
  display: block;
  padding: 8px 14px;
  color: var(--text);
  opacity: 0.9;
}

.submenu li a:hover {
  background: var(--line);
}

.dropdown:hover .submenu {
  display: block;
}

/* Pour mobile : sous-menus visibles dans le menu d√©roulant */
@media (max-width: 960px) {
  .navlinks li { width: 100%; }
  .submenu {
    position: static;
    display: none;
    background: transparent;
    border: none;
    box-shadow: none;
    padding-left: 10px;
  }
  .dropdown.open .submenu {
    display: block;
  }
}

    .cta{background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#001628 !important;padding:10px 14px;border-radius:12px;font-weight:700}
    .menu-btn{display:none}






/* --- Animation d'apparition au scroll --- */
.fade-up {
  opacity: 0;
  transform: translateY(40px);
  transition: opacity 0.8s ease, transform 0.8s ease;
}

.fade-up.visible {
  opacity: 1;
  transform: translateY(0);
}

/* --- Animation d'apparition globale pour toutes les sections --- */
.reveal {
  opacity: 0;
  transform: translateY(60px) scale(0.98);
  transition: opacity 1.2s ease-out, transform 1.2s ease-out;
  will-change: opacity, transform;
}

.reveal.visible {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* --- Apparition fluide globale --- */
.fade-up, .slide-left, .slide-right, .zoom-in {
  opacity: 0;
  transition: opacity 1.2s ease-out, transform 1.2s ease-out;
  will-change: opacity, transform;
}

/* Effets de d√©part */
.fade-up { transform: translateY(60px); }
.slide-left { transform: translateX(-80px); }
.slide-right { transform: translateX(80px); }
.zoom-in { transform: scale(0.9); }

/* Quand l‚Äô√©l√©ment devient visible */
.fade-up.visible,
.slide-left.visible,
.slide-right.visible,
.zoom-in.visible {
  opacity: 1;
  transform: none;
}

/* Animation du trac√© de la courbe */
.curve-path {
  stroke: var(--accent);
  stroke-width: 2px;
  fill: none;
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  transition: stroke-dashoffset 3.5s ease-in-out;
}

/* Quand on scrolle jusqu‚Äô√† la section */
.curve-path.animate {
  stroke-dashoffset: 0;
}



/* === Footer professionnel === */
.footer {
  background: var(--bg);
  color: var(--text);
  border-top: 1px solid var(--line);
  padding: 60px 20px 30px;
  position: relative;
}

.footer-grid {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  align-items: flex-start;
  gap: 40px;
}

.footer-logo {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 8px;
}

.footer-logo img {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 12px;
}

.footer-logo h3 {
  font-size: 22px;
  font-weight: 700;
  color: var(--accent);
}

.footer-contact h4,
.footer-social h4 {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 12px;
}

.footer-contact p {
  margin: 8px 0;
  color: var(--muted);
  font-size: 15px;
  line-height: 1.6;
}

.footer-contact a {
  color: var(--accent-2);
  text-decoration: none;
  transition: color 0.3s ease;
}

.footer-contact a:hover {
  color: var(--accent);
}

/* === Ic√¥ne LinkedIn === */
.footer-social {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 16px;
}

.footer-social .social-link {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: 2px solid var(--accent);
  color: var(--accent);
  font-size: 24px;
  transition: all 0.3s ease;
}

.footer-social .social-link:hover {
  background: var(--accent);
  color: #001628;
  transform: scale(1.05);
}

/* === Fl√®che retour haut === */
.scroll-top {
  position: absolute;
  right: 40px;
  top: 40px;
  background: transparent;
  border: none;
  color: var(--muted);
  font-size: 32px;
  transition: color 0.3s ease, transform 0.3s ease;
}

.scroll-top:hover {
  color: var(--accent);
  transform: translateY(-4px);
}

/* === Responsive === */
@media (max-width: 960px) {
  .footer-grid {
    grid-template-columns: 1fr;
    text-align: center;
    gap: 40px;
  }

  .footer-logo,
  .footer-contact,
  .footer-social {
    align-items: center;
  }

  .scroll-top {
    right: 20px;
    top: 20px;
  }
}

/* === MENU MOBILE PRO === */
.menu-btn {
  display: none;
  background: none;
  border: none;
  color: var(--accent);
  font-size: 34px;
  cursor: pointer;
  transition: color 0.3s ease, transform 0.3s ease;
}

.menu-btn:hover {
  color: var(--accent-2);
  transform: scale(1.1);
}

@media (max-width: 960px) {
  .menu-btn {
    display: block;
  }

  .navlinks {
    position: fixed;
    top: 0;
    right: -100%;
    width: 80%;
    max-width: 320px;
    height: 100vh;
    background: rgba(12, 16, 32, 0.98);
    backdrop-filter: blur(10px);
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 80px 28px;
    gap: 20px;
    transition: right 0.4s ease;
    z-index: 2000;
    box-shadow: -6px 0 20px rgba(0,0,0,0.5);
  }

  .navlinks.show {
    right: 0;
  }

  .navlinks a {
    font-size: 18px;
    color: var(--text);
    text-decoration: none;
    padding: 10px 0;
    width: 100%;
  }

  .navlinks a:hover {
    color: var(--accent);
  }

  .menu-close {
    position: absolute;
    top: 20px;
    right: 24px;
    background: none;
    border: none;
    color: var(--accent);
    font-size: 32px;
    cursor: pointer;
    transition: color 0.3s ease, transform 0.3s ease;
  }

  .menu-close:hover {
    color: var(--accent-2);
    transform: scale(1.1);
  }

  .submenu {
    display: none;
    flex-direction: column;
    gap: 6px;
    padding-left: 14px;
  }

  .dropdown.open .submenu {
    display: flex;
  }
}

/* ‚úÖ Bouton "X" uniquement sur mobile */
.menu-close {
  display: none;
}

@media (max-width: 960px) {
  .menu-close {
    display: block;
  }
}




/* ‚úÖ Fixe la zone cliquable du bouton X */
.menu-close {
  display: none; /* cach√© sur PC */
}

@media (max-width: 960px) {
  .menu-close {
    display: flex;               /* ‚úÖ pour centrer l‚Äôic√¥ne */
    align-items: center;
    justify-content: center;
    width: 48px;                 /* ‚úÖ surface cliquable */
    height: 48px;
    background: none;
    border: none;
    color: var(--accent);
    font-size: 32px;
    cursor: pointer;
    position: absolute;
    top: 20px;
    right: 24px;
    z-index: 2100;               /* ‚úÖ au-dessus du reste du menu */
    transition: color 0.3s ease, transform 0.3s ease;
  }

  .menu-close:hover {
    color: var(--accent-2);
    transform: scale(1.1);
  }

  .menu-close i {
    pointer-events: none;        /* ‚úÖ pour √©viter les d√©calages de clic */
  }
}


/* === Section Candidature Premium === */
.candidature-section {
  background: radial-gradient(circle at 20% 20%, rgba(107,211,255,0.08), transparent 50%), 
              radial-gradient(circle at 80% 0%, rgba(0,184,132,0.08), transparent 50%), 
              rgba(255,255,255,0.02);
  backdrop-filter: blur(14px);
  border-top: 1px solid var(--line);
  border-bottom: 1px solid var(--line);
  padding: 100px 0;
  text-align: center;
  color: var(--text);
}

.section-title {
  font-size: 38px;
  font-weight: 700;
  color: var(--accent);
  margin-bottom: 12px;
}

.section-subtitle {
  color: var(--muted);
  font-size: 17px;
  margin-bottom: 50px;
}

.candidature-form {
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 40px;
  box-shadow: var(--shadow);
  max-width: 900px;
  margin: 0 auto;
  text-align: left;
}

.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 20px;
  margin-bottom: 24px;
}

.form-group {
  display: flex;
  flex-direction: column;
}

.form-group label {
  font-weight: 600;
  color: var(--accent);
  margin-bottom: 6px;
}

.form-group input,
.form-group textarea {
  background: rgba(255,255,255,0.05);
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: 12px 14px;
  color: var(--text);
  font-size: 15px;
  outline: none;
  transition: border 0.3s ease, box-shadow 0.3s ease;
}

.form-group input:focus,
.form-group textarea:focus {
  border-color: var(--accent);
  box-shadow: 0 0 10px rgba(107,211,255,0.3);
}

.form-group.file input {
  background: transparent;
  border: none;
  color: var(--accent-2);
  cursor: pointer;
}

.form-group.full {
  grid-column: 1 / -1;
}

.btn-primary {
  display: inline-block;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  color: #001628;
  border: none;
  border-radius: 14px;
  padding: 14px 28px;
  font-weight: 700;
  font-size: 16px;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.btn-primary:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(107,211,255,0.3);
}

/* --- Am√©lioration de l'espacement et du message de confirmation --- */

.candidature-form .btn-primary {
  margin-top: 30px; /* ‚úÖ espace entre le textarea et le bouton */
}

.confirmation-message {
  display: none;
  text-align: center;
  margin-top: 25px;
  font-size: 16px;
  color: var(--accent-2);
  animation: fadeIn 0.6s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* === Confirmation premium === */
.confirmation-message {
  display: none;
  text-align: center;
  margin-top: 35px;
  color: var(--accent-2);
  animation: fadeIn 0.6s ease forwards;
}

.confirmation-message p {
  margin-top: 12px;
  font-size: 16px;
  color: var(--accent-2);
  font-weight: 600;
}

/* --- Animation coche --- */
.checkmark {
  width: 70px;
  height: 70px;
  display: block;
  margin: 0 auto;
  stroke-width: 2;
  stroke: var(--accent-2);
  stroke-miterlimit: 10;
  box-shadow: inset 0px 0px 0px var(--accent-2);
  border-radius: 50%;
  animation: scaleIn 0.3s ease-in-out both;
}

.checkmark__circle {
  stroke-dasharray: 166;
  stroke-dashoffset: 166;
  stroke-width: 2;
  stroke-miterlimit: 10;
  stroke: var(--accent-2);
  fill: none;
  animation: strokeCircle 0.6s ease-in-out forwards;
}

.checkmark__check {
  transform-origin: 50% 50%;
  stroke-dasharray: 48;
  stroke-dashoffset: 48;
  animation: strokeCheck 0.4s 0.6s ease-in-out forwards;
}

@keyframes strokeCircle {
  100% { stroke-dashoffset: 0; }
}

@keyframes strokeCheck {
  100% { stroke-dashoffset: 0; }
}

@keyframes scaleIn {
  0%, 100% { transform: none; }
  50% { transform: scale(1.1); }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

  </style>
</head>

<body>

  <!-- === HEADER identique === -->
  <header>
    <div class="container nav">
      <a href="index.html" class="brand" aria-label="Accueil ‚Äì ASTROVIA">
        <img src="astrovia.jpg" alt="Logo ASTROVIA" class="logo-img">
        <span>ASTROVIA</span>
      </a>
      <nav>
        <button class="menu-btn" aria-expanded="false" aria-controls="navlinks" aria-label="Ouvrir le menu">
          <i data-lucide="menu"></i>
        </button>
        <ul id="navlinks" class="navlinks">
          <li class="close-btn">
            <button class="menu-close" aria-label="Fermer le menu">
              <i data-lucide="x"></i>
            </button>
          </li>
          <li><a href="accueil.html">Accueil</a></li>
          <li class="dropdown">
            <a href="expertises.html" >Nos expertises ‚ñæ</a>
            <ul class="submenu">
              <li><a href="consulting.html">Consulting</a></li>
              <li><a href="cabinet-de-recrutement.html">Cabinet de recrutement</a></li>
              <li><a href="solutions-de-fidelisation.html">Solutions de fid√©lisation</a></li>
            </ul>
          </li>
          <li><a href="valeurs.html">Nos valeurs</a></li>
          <li><a href="qui-sommes-nous.html">Qui sommes-nous</a></li>
          <li class="dropdown">
            <a href="rejoignez-nous.html" class="cta">Rejoignez-nous ‚ñæ</a>
            <ul class="submenu">
              <li><a href="offres-consulting.html">offres Consulting</a></li>
              <li><a href="offres-cabinet-de-recrutement.html">offres Cabinet de recrutement</a></li>
              <li><a href="candidature-spontanee.html">Candidature spontan√©e</a></li>
            </ul>
          </li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

<!-- === SECTION CANDIDATURE SPONTAN√âE PREMIUM === -->
<section class="candidature-section reveal" id="candidature">
  <div class="container">
    <h2 class="section-title">Candidature spontan√©e</h2>
    <p class="section-subtitle">
      Vous souhaitez rejoindre l‚Äôaventure ASTROVIA ? Envoyez-nous votre candidature, nous serons ravis d‚Äôen savoir plus sur vous.
    </p>

    <form class="candidature-form" id="candidatureForm" action="#" method="post" enctype="multipart/form-data">
      <div class="form-grid">
        <div class="form-group">
          <label>Nom</label>
          <input type="text" name="nom" placeholder="Votre nom" required>
        </div>
        <div class="form-group">
          <label>Pr√©nom</label>
          <input type="text" name="prenom" placeholder="Votre pr√©nom" required>
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" name="email" placeholder="votre@email.com" required>
        </div>
        <div class="form-group">
          <label>T√©l√©phone</label>
          <input type="tel" name="telephone" placeholder="+33 6 12 34 56 78">
        </div>
        <div class="form-group file">
          <label>CV</label>
          <input type="file" name="cv" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" required>
        </div>
        <div class="form-group file">
          <label>Autre fichier</label>
          <input type="file" name="autre" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png">
        </div>
      </div>

      <div class="form-group full">
        <label>Lettre de motivation</label>
        <textarea name="message" rows="5" placeholder="Votre message..."></textarea>
      </div>
      <br>
      <!-- üîí Widget reCAPTCHA -->
      <div class="g-recaptcha" data-sitekey="6LdWmA0sAAAAAOaucZUCEnXKWkfq11kfqKNQJ44N"></div>

      <button type="submit" class="btn-primary">Envoyer ma candidature</button>

<div class="confirmation-message">
  <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
    <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
    <path class="checkmark__check" fill="none" d="M14 27l7 7 16-16"/>
  </svg>
  <p>Merci ! Votre candidature a √©t√© envoy√©e avec succ√®s.</p>
</div>


    </form>
  </div>
</section>

  


  <!-- === FOOTER identique === -->
  <footer class="footer">
    <div class="container footer-grid">
      <div class="footer-logo">
        <img src="astrovia.jpg" alt="Logo ASTROVIA">
        <h3>ASTROVIA</h3>
      </div>
     <div class="footer-contact">
        <h4>Contact</h4>
        <p>O√π nous trouver :<br>
          6 RUE D'ARMAILLE, 75017 PARIS
        </p>
        <p>Nous appeler :<br>
          <a href="tel:+33648283477">07 66 51 87 06</a>
        </p>
        <p>E-mail :<br>
          <a href="mailto:contact@astrovia.fr">raouf.gacemi@astrovia.fr</a>
        </p>
      </div>
      <div class="footer-social">
        <h4>Suivez-nous</h4>
        <a href="#" class="social-link" aria-label="LinkedIn ASTROVIA">
          <i data-lucide="linkedin"></i>
        </a>
      </div>
      <a href="#top" class="scroll-top" aria-label="Remonter en haut">
        <i data-lucide="arrow-up"></i>
      </a>
    </div>
  </footer>


  <!-- === JS pour les ic√¥nes et le menu mobile === -->
  <script>
    lucide.createIcons();

    document.addEventListener("DOMContentLoaded", () => {
      const menuBtn = document.querySelector('.menu-btn');
      const menuClose = document.querySelector('.menu-close');
      const navlinks = document.getElementById('navlinks');

      // Ouvre le menu
      if (menuBtn && navlinks) {
        menuBtn.addEventListener('click', () => {
          navlinks.classList.add('show');
          menuBtn.setAttribute('aria-expanded', 'true');
        });
      }

      // Ferme le menu
      if (menuClose && navlinks) {
        menuClose.addEventListener('click', () => {
          navlinks.classList.remove('show');
          menuBtn.setAttribute('aria-expanded', 'false');
        });
      }

      // Ferme le menu quand on clique sur un lien sans sous-menu
      navlinks.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', (e) => {
          const parent = link.parentElement;
          const hasSubmenu = parent.classList.contains('dropdown');

          if (window.innerWidth <= 960 && hasSubmenu) {
            e.preventDefault();
            if (parent.classList.contains('open')) {
              window.location.href = link.getAttribute('href');
            } else {
              document.querySelectorAll('.dropdown.open').forEach(el => el.classList.remove('open'));
              parent.classList.add('open');
            }
            return;
          }

          if (window.innerWidth <= 960) {
            navlinks.classList.remove('show');
            menuBtn.setAttribute('aria-expanded', 'false');
          }
        });
      });
    });

            // === Apparition au scroll ===
  const revealElements = document.querySelectorAll(".reveal, .fade-up, .slide-left, .slide-right, .zoom-in");

function revealOnScroll() {
  const windowHeight = window.innerHeight;
  revealElements.forEach(el => {
    const elementTop = el.getBoundingClientRect().top;
    if (elementTop < windowHeight - 100) {
      el.classList.add("visible");
    }
  });
}

window.addEventListener("scroll", revealOnScroll);
window.addEventListener("load", revealOnScroll);



</script>


 
<script>
document.addEventListener("DOMContentLoaded", function () {
  const form     = document.getElementById("candidatureForm");
  const message  = document.querySelector(".confirmation-message");
  const button   = form.querySelector(".btn-primary");

  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzZZuRk1OAhS1FoB1H8itIDO_1Euq778CrPZ6p18z_Ax35Mku84D_fDLOPNX2weKkj_/exec";

  // Limite c√¥t√© navigateur (5 Mo)
  const MAX_SIZE_FRONT = 5 * 1024 * 1024;

  // Affichage du message (succ√®s ou erreur)
  function showMessage(html, isError = false) {
    message.style.display = "block";
    message.style.color   = isError ? "#ff5a5f" : "var(--accent-2)";
    message.innerHTML     = html;

    message.scrollIntoView({ behavior: "smooth", block: "center" });

    setTimeout(() => { message.style.display = "none"; }, 120000);
  }

  // V√©rification d'un fichier (taille + type)
  function validateFileInput(file, label) {
    if (!file) return true; // champ optionnel

    if (file.size > MAX_SIZE_FRONT) {
      showMessage(`‚ùå Le fichier <strong>"${label}"</strong> d√©passe la limite de 5 Mo.`, true);
      return false;
    }

    const allowed = [
      "application/pdf",
      "application/msword",
      "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
      "image/jpeg",
      "image/png"
    ];

    if (!allowed.includes(file.type)) {
      showMessage(`‚ùå Type de fichier non autoris√© pour <strong>${label}</strong>.`, true);
      return false;
    }

    return true;
  }

  // Lit un fichier en base64 (retourne une Promise)
  function fileToBase64(file) {
    return new Promise((resolve, reject) => {
      if (!file) return resolve(null);
      const reader = new FileReader();
      reader.onload = () => {
        const result = reader.result;      // "data:xxx/xxx;base64,AAAA..."
        const base64 = result.split(",")[1];
        resolve(base64);
      };
      reader.onerror = reject;
      reader.readAsDataURL(file);
    });
  }

  // Soumission du formulaire
  form.addEventListener("submit", async function (e) {
    e.preventDefault();


        // üîí V√©rification reCAPTCHA c√¥t√© front
    if (typeof grecaptcha === "undefined") {
      showMessage("‚ùå reCAPTCHA non charg√©. V√©rifiez votre connexion et r√©essayez.", true);
      return;
    }

    const recaptchaToken = grecaptcha.getResponse();
    if (!recaptchaToken) {
      showMessage("‚ùå Merci de cocher la case ¬´ Je ne suis pas un robot ¬ª.", true);
      return;
    }




    // V√©rif champs obligatoires
    if (!form.nom.value.trim() ||
        !form.prenom.value.trim() ||
        !form.email.value.trim() ||
        !form.cv.files[0]) {
      showMessage("‚ùå Merci de remplir tous les champs obligatoires et de joindre votre CV.", true);
      return;
    }

    // Fichiers
    const cvFile    = form.cv.files[0] || null;
    const autreFile = form.autre.files[0] || null;

    // Validation fichiers avant envoi
    if (!validateFileInput(cvFile, "CV")) return;
    if (!validateFileInput(autreFile, "Autre fichier")) return;

    button.disabled = true;
    const originalText = button.textContent;
    button.textContent = "Envoi en cours...";

    try {
            const nom        = form.nom.value.trim();
      const prenom     = form.prenom.value.trim();
      const email      = form.email.value.trim();
      const telephone  = form.telephone.value.trim();
      const messageTxt = form.message.value.trim();

      const recaptchaToken = grecaptcha.getResponse(); // üîí r√©cup√©r√© plus haut

      // Conversion en base64
      const cvBase64    = await fileToBase64(cvFile);
      const autreBase64 = await fileToBase64(autreFile);

      const payload = {
        nom,
        prenom,
        email,
        telephone,
        message: messageTxt,

        // üîê on envoie aussi le token reCAPTCHA au script
        recaptchaToken,

        cvName:    cvFile    ? cvFile.name    : null,
        cvType:    cvFile    ? cvFile.type    : null,
        cvData:    cvBase64  || null,

        autreName: autreFile ? autreFile.name : null,
        autreType: autreFile ? autreFile.type : null,
        autreData: autreBase64 || null
      };


      // ENVOI vers Apps Script (no-cors ‚Üí on ne lit pas la r√©ponse)
      await fetch(SCRIPT_URL, {
        method: "POST",
        mode: "no-cors",
        headers: {
          "Content-Type": "text/plain;charset=utf-8"
        },
        body: JSON.stringify(payload)
      });

      showMessage(`
        <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
          <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
          <path class="checkmark__check" fill="none" d="M14 27l7 7 16-16"/>
        </svg>
        <p>Merci, votre candidature a bien √©t√© transmise √† nos √©quipes.<br>
        Vous serez recontact√©(e) si votre profil correspond √† nos besoins.</p>
      `);

      form.reset();

    } catch (err) {
      console.error(err);
      showMessage("‚ùå Erreur lors de l‚Äôenvoi de votre candidature. Veuillez r√©essayer.", true);
    } finally {
      button.disabled = false;
      button.textContent = originalText;
    }
  });
});
</script>


<script src="https://www.google.com/recaptcha/api.js" async defer></script>

</body>
</html>









